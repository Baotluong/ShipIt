@model ShipIt.ViewModels.BetsIndexViewModel

@{
    ViewBag.Title = "My Bets";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>My Bets</h2>

<table id="bets" class="table table-bordered table-hover">
    <thead>
        <tr>
            <th>Status</th>
            <th>Bet</th>
            <th>Wager</th>
            <th><span class="glyphicon glyphicon-user" aria-hidden="true"></span>1</th>
            <th><span class="glyphicon glyphicon-user" aria-hidden="true"></span>1 Wins If</th>
            <th><span class="glyphicon glyphicon-user" aria-hidden="true"></span>2</th>
            <th><span class="glyphicon glyphicon-user" aria-hidden="true"></span>2 Wins If</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

@section scripts
{
    <script>
        //TODO: Not sure how to pass the id from viewmodel to grab other users bet index
        $(document).ready(function () {
            var table = $("#bets").DataTable({
                ajax: {
                    url: "/api/bets/@Model.id/",
                    dataSrc: ""
                },
                responsive: true,
                columns: [
                    {
                        data: "BetStatus",
                        render: function (data) {
                            return data + "<span class='glyphicon glyphicon-collapse-down visible-xs' aria-hidden='true'></span>";
                        }
                    },
                    {
                        data: "BetPremise",
                        render: function (data, type, bet) {
                            return (bet.BetPremise)
                                ? "<a href='/bets/details/" + bet.BetId + "'>" + bet.BetPremise + "</a>"
                                : null;
                        }
                    },
                    {
                        data: "BetWager"
                    },
                    {
                        data: "User1",
                        render: function (data, type, bet) {
                            return (bet.User1)
                                ? "<a href='/bets/betsindex/" + bet.User1 + "/'>" + bet.User1 + "</a>"
                                : null;
                        }
                    },
                    {
                        data: "User1Condition",
                    },
                    {
                        data: "User2",
                        render: function (data, type, bet) {
                            return (bet.User1)
                                ? "<a href='/bets/betsindex/" + bet.User2 + "/'>" + bet.User2 + "</a>"
                                : null;
                        }
                    },
                    {
                        data: "User2Condition",
                    },
                ]
            });
        });
    </script>
}